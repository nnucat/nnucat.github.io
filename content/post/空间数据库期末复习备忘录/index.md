---
title: "空间数据库期末复习备忘录"
date: 2021-12-31T08:30:00+08:00
draft: flase
tags: ["数据库"]
description: ""
summary: "空间数据库期末复习题与部分重点"
---

## 复习题

**Q1：如何保证物理独立性和逻辑独立性？**

数据库系统的三级模式是数据的三个抽象类别，把数据的具体组织留给数据库系统管理，使用户能逻辑地、抽象地处理数据，而不必关心数据库在系统的具体表示方式和存储方式。

数据库管理系统在这三级模式之间提供了两层镜像：外模式/模式映像和模式/内模式映像，正是这两层映像保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。

**Q2：根据实体完整性和参照完整性判断数据是否能插入？假如不能插入，是违反了实体完整性还是参照完整性？**

实体完整性原则：主属性不能取空值（NULL），如果主码由若干主属性组成，如：选修（<u>学号</u>，课程号，成绩），则所有主属性都不能取空值。
参照完整性原则：若F为基本关系R的外码，F与基本关系S的主码K~S~相对应。对于基本关系R，R中每个元组在外码F上的值必须取空值（F的每个属性值均为空值）或者等于基本关系S中某个元组的主码值。

**Q3：什么是关系规范化，关系规范化从第一范式到第二范式到第三范式的过程。并画图解释。**

数据规范化实际上是概念的单一化。关系模式的规范化过程是通过对关系模式的分解来实现的，即把低一级的关系模式分解为若干个高一级的关系模式。消除数据依赖中不合适的部分，使各关系模式达到某种程度的分离，使一个关系只描述一个概念、一个实体或实体间的一种联系。

1. 关系作为一个二维表，要符合一个最基本的条件：**每一个分量必须是不可分的数据项（表不能有子表）**。满足了这个条件的关系模式就属于**第一范式(1NF)**。

2. 若R∈1NF，且每一个**非主属性*全函数依赖*于任何一个候选码**，则称为第二范式，记作R∈2NF。 2NF通过消除部分函数依赖，可以在一定程度上减轻1NF中存在的插入异常、删除异常、数据冗余大、修改复杂等问题，但并不能完全消除关系模式的各种异常情况和数据冗余。

   ⭐️**简单来说就是再拆分几张表出来，让表中只剩下完全依赖，部分依赖是一切问题的根源。**

3. 3NF关系模式的性质

   - 若R∈3NF，则**R的每一个非主属性既不部分函数依赖于候选码也不传递函数依赖于候选码**。
   - 若R∈3NF，则R∈2NF。
   - 采用投影分解法将一个2NF的关系分解为多个3NF的关系，可以在一 定程度上解决原2NF关系中存在的插入异常、删除异常、冗余度、修改复杂等问题。**但依然并不能完全消除关系模式中的各种异常情况和数据冗余。**

   ⭐️ **采用投影分解法**，把一张大表拆成多个小表。

   ⭐️ **保证在分解后的关系模式中既没有非主属性对码的部分函数依赖，也没有非主属性对码的传递函数依赖。** 

**Q4：视图的定义以及它的特点**

视图（子查询）：是从一个或多个基本表导出的虚拟的表，其内容由查询定义。具有普通表的结构，但是不实现数据存储。

视图的特点：

1. 视图能够简化用户的操作。
2. 视图使用户能以多种角度看待同一数据。
3. 视图对重构数据库提供了一定程度的逻辑独立性。
4. 视图能够对机密数据提供安全保护。
5. 适当利用视图可以更清晰的表达查询。

**Q5：数据库的恢复过程中如何利用日志文件进行恢复的步骤？故障的恢复中如何利用日志文件进行恢复？**

⭐️如果是事物故障的恢复：

1. 先反向扫描日志文件，查找该事务的更新操作。
1. 对该事务的更新操作执行逆操作，即将日志记录中“更新前的值”写入数据库。
1. 继续反向扫描日志文件，查找该事务的其他更新操作，并做同样处理。
1. 如此继续下去，直至读到该事务的开始标记。

如果是系统故障的恢复：

1. 先正向扫描日志文件，找出在故障发生前已经提交的事务，将其事务标记记入重做队列。同时找出故障发生时尚未完成的事务，将其事务标记记入撤销队列。
2. 对撤销队列中的各个事务进行撤销处理。（反向扫描日志文件，对每个撤销事务的更新操作执行逆操作，即将日志记录中“更新前的值”写入数据库）
3. 对重做队列中的各个事务进行重做处理。（正向扫描日志文件，对每个重做事务重新执行日志文件登记操作，即将日志记录中“更新后的值”写入数据库。

**Q6：空间数据库的特征，空间数据库和一般数据库的差别在哪？**

空间数据库特征：

1. 综合抽象特征
2. 时空特征
3. 空间关系特征
4. 非结构化特性
5. 分类编码特征
6. 多尺度与多态性
7. 海量数据特征

空间数据库和一般数据库的差别：

1. 信息描述差异

   - 在空间数据库中，数据比较复杂，不仅有与一般数据库性质相似的地理要素的属性数据，还有大量的空间数据，即描述地理要素空间分布位置的数据，并且这两种数据之间具有不可分割的联系。
   - 空间数据库是一个复杂的系统，要用数据来描述各种地理要素，尤其是要素的空间位置，其数据量往往很大。空间数据库中的数据具有丰富的隐含信息。例如，数字高程模型（DEM）除了载荷高度信息外，还隐含了地质岩性与构造方面的信息；植物的种类是显式信息，但植物的类型还隐含了气候的水平地带性和垂直地带性的信息等。

2. 数据管理差异

   - 传统数据库管理的是不连续的、相关性较小的数字和字符；而空间数据是连续的，具有很强的空间相关性。
   - 传统数据库管理的实体类型少，并且实体类型之间通常只有简单固定的空间关系；而空间数据库的实体类型繁多，实体类型之间存在着复杂的空间关系，并且能产生新的关系（如拓扑关系）。
   - 地理空间数据存储操作的对象可能是一维、二维、三维甚至更高维。一方面，可以把空间数据库看成是传统数据库的扩充；另一方面，空间数据库突破了传统的数据库理论，如将规范关系推向非规范关系。而传统数据库系统只针对简单对象，无法有效地支持复杂对象（如图形、图像）。传统数据库存储的数据通常为等长记录的原子数据，而空间数据库通常由于不同空间目标的坐标串长度不定，具有变长记录的特点，并且数据项也可能很大、很复杂。
   - 地理空间数据的实体类型繁多，不少对象相当复杂，地理空间数据管理技术还必须具有对地理对象（大多为具有复杂结构和内涵的复杂对象）进行模拟和推理的据模型功能。但是，传统数据库系统的数据模拟主要针对简单对象，管理的实体类型较少，因而，无法有效地支持以复杂对象为主体的GIS领域。随着GIS技术向三维甚至更高维方向发展，GIS系统需要描述表达的对象越来越复杂，这个问题将越来越突出。
   - 空间数据库有许多与关系数据库不同的显著特征。空间数据库包含了拓扑信息、距离信息、时空信息，通常按复杂的、多维的空间索引结构组织数据，能被特有的空间数据访问方式所访问，经常需要空间推理、几何计算和空间知识表达等技术。

3. 数据操作差异

   从数据操作的角度，地理空间数据管理中需要进行大量的空间数据操作和查询，如矢量地图的剪切、叠加和缓冲区等空间操作、裁剪、合并、影像特征提取、影像分割、影像代数运算、拓扑以及相似性查询等，而传统数据库系统只操作和查询文字和数字信息，难以适应空间操作。

4. 数据更新差异

   - 数据更新周期不同。传统数据库的更新频度较高，而空间数据库的更新频度一般是以年度为限。
   - 数据更新的角色不同。空间数据库更新一般由专人负责，一是因为要保证空间数据的准确性，二是空间数据的更新需要专门的技术。而传统数据库的更新可能是任何使用数据库的人员。
   - 访问的数据量不同。传统数据库每次访问的数据量较少，而空间数据库访问的数据量大，因而空间数据库要求有很高的网络带宽。
   - 数据更新的策略不同。传统数据库一般由事务控制，而空间数据库一般允许访问时间相对滞后的数据，一方面因为空间对象的变化较缓慢；另一方面因为人为因素未能及时更新，但这不影响对先前更新的数据的访问；另外，GIS系统一般是作为决策支持系统出现的，而决策支持系统基本上使用的是历史数据。

5. 服务应用差异

   - 一个空间数据库的服务和应用范围相当广泛，如地理研究、环境保护、土地利用和规划、资源开发、生态环境、市政管理、交通运输、税收、商业、公安等许多领域。
   - 空间数据库是一个共享或分享式的数据库。
   - 传统的关系数据库中存储和处理的大都是关系数据。

**Q7：数据库设计的步骤是怎样，过程中三级模式是如何形成的？并画图或画表回答 **

按照结构化系统设计的方法，考虑数据库及其应用系统开发全过程，将数据库设计分为以下6个阶段：

1. 需求分析

2. 概念结构设计

3. 逻辑结构设计

4. 物理结构设计

5. 数据库实施

6. 数据库的运行和维护

数据库设计过程中的三级模式：

在需求分析阶段综合各个用户的应用需求；

在概念设计阶段形成独立于机器特点、独立于各个关系数据库管理系统产品的概念模式，如E-R图；

在逻辑结构设计阶段将E-R图转换成具体的数据库产品支持的数据模型，如关系模型，形成数据库逻辑模式；

然后根据用户处理的要求、安全性的考虑，在基本表的基础上再建立必要的视图，形成数据的外模式；

在物理结构设计阶段，根据关系数据库管理系统的特点和处理的需要进行物理存储安排，建立索引，形成数据库内模式。

![数据库各级模式](modes.jpg)

**Q8：综合题是上机作业用到的画它的概念模型和E-R图，把E-R图转换为对应的关系模式。看它有几个实体，实体之间的联系是什么写出这个表的名字以及括号（）里面的属性，主属性画横线**

E-R图：

1. **实体型用矩形表示**，矩形框内写明实体名。
2. **属性用椭圆形表示**，并连接相应的实体型。
3. 联系用菱形表示，菱形框内写明联系名，并与实体型连接，写明联系的类型（1 : n）。

## 数据模型

1. 数据模型是对现实世界数据特征的抽象。
2. 数据模型是数据库系统的核心和基础。

### 两类数据模型

1. 根据模型应用的不同目的，可以将数据模型分为两大类：第一类是**概念模型**，第二类是**逻辑模型和物理模型**。
2. 第一类的概念模型也称信息模型，按用户的观点对数据和信息建模，主要用于数据库设计。
3. 第二类中的逻辑模型主要包括层次模型、网状模型、关系模型、面向对象数据模型和对象关系数据模型、半结构化数据模型等。

### 概念模型

#### 信息世界中的基本概念

1. **实体**：客观存在并可相互区别的事务称为实体。
2. **属性**：实体所具有的某一特性称为属性。
3. **码**：唯一标识实体的属性集称为码。
4. **实体型**：用实体名及其属性名来抽象和刻画同类实体，称为实体型。
5. **实体集**：同一类型实体的集合称为实体集。
6. **联系**
